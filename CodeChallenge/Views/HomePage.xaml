<?xml version="1.0" encoding="utf-8"?>
<ContentPage
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:cells="clr-namespace:CodeChallenge.Views.Cells"
    x:Class="CodeChallenge.Views.HomePage"
    Title="Code Challenge"
    Padding="{x:OnPlatform Android=16, iOS='16,20,16,16'}">
    <Grid>
        <CollectionView
            ItemsSource="{Binding Movies}"
            SelectionMode="None"
            VerticalScrollBarVisibility="Never"
            HorizontalScrollBarVisibility="Never"
            HorizontalOptions="FillAndExpand"        
            Footer="{Binding}"
            RemainingItemsThreshold="{Binding ItemsThreshold}"
            RemainingItemsThresholdReachedCommand="{Binding LoadMoreCommand}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <cells:MovieItemView />
                </DataTemplate>
            </CollectionView.ItemTemplate>
            <CollectionView.FooterTemplate>
                <DataTemplate>
                    <Grid IsVisible="{Binding IsBusy}">
                        <ActivityIndicator HorizontalOptions="Center" IsRunning="{Binding IsBusy}"/>
                    </Grid>
                </DataTemplate>
            </CollectionView.FooterTemplate>
        </CollectionView>
    </Grid>
</ContentPage>